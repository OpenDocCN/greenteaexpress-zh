# 第三章：变量和值

> 原文：[`allendowney.github.io/ElementsOfDataScience/01_variables.html`](https://allendowney.github.io/ElementsOfDataScience/01_variables.html)
> 
> 译者：[飞龙](https://github.com/wizardforcel)
> 
> 协议：[CC BY-NC-SA 4.0](http://creativecommons.org/licenses/by-nc-sa/4.0/)


[在 Colab 上运行此笔记本](https://colab.research.google.com/github/AllenDowney/ElementsOfDataScience/blob/master/01_variables.ipynb) 或

[在 Sagemaker Studio Lab 上运行此笔记本](https://studiolab.sagemaker.aws/import/github/AllenDowney/ElementsOfDataScience/blob/master/01_variables.ipynb) 或

[下载此笔记本](https://github.com/AllenDowney/ElementsOfDataScience/raw/master/01_variables.ipynb)。

数据科学是利用数据来回答问题和指导决策的过程。例如，当前有争议的一个话题是我们是否应该提高美国的最低工资标准。一些经济学家认为提高最低工资标准会使家庭摆脱贫困；其他人认为这会导致更多的失业。但是经济理论只能带我们走到这一步。在某个时候，我们需要数据。

成功的数据科学项目需要三个要素：

+   一个问题：例如，最低工资和失业之间的关系是什么？

+   数据：要回答这个问题，最好的数据将是来自一个设计良好的实验的结果。但如果我们无法获得理想的数据，我们必须利用我们能够获得的数据。

+   方法：有了正确的数据，简单的方法通常足以找到答案并清晰地呈现它们。但有时我们需要更专业的工具。

在理想的世界中，我们会提出一个问题，找到数据，并按顺序选择适当的方法。更常见的情况是迭代的过程。我们可能从一个问题开始，卡住了，然后转向另一个问题。或者我们可能探索一个新的数据集，并发现它可以回答的问题。或者我们可能从一个工具开始，然后寻找它可以解决的问题。大多数数据科学项目都需要灵活性和坚持不懈。

这本书的目标是为您提供从头到尾执行数据科学项目所需的工具，包括以下步骤：

+   选择问题、数据和相配套的方法。

+   查找数据或自己收集数据。

+   清理和验证数据。

+   探索数据集，可视化变量之间的分布和关系。

+   对数据建模和生成预测。

+   设计能讲述引人入胜故事的数据可视化。

+   有效地传达结果。

我们将从基本的编程概念开始，逐步向数据科学工具迈进。

我不会假设您已经了解编程、统计学或数据科学。当我使用一个术语时，我会立即尝试对其进行定义，当我使用一个编程特性时，我会尽量清晰地解释它。

这本书是以 Jupyter 笔记本的形式呈现的。Jupyter 是一种软件开发工具，可以在 Web 浏览器中运行，因此您不必安装任何软件。Jupyter 笔记本是一个包含文本、Python 代码和结果的文档。因此，您可以像阅读书籍一样阅读它，但也可以修改代码、运行它、开发新程序并测试它们。

这些笔记本包含练习，您可以在学习过程中练习。我鼓励您在学习过程中做练习。

本章的主题包括：

+   使用 Jupyter 编写和运行 Python 代码。

+   Python 中的基本编程特性：变量和值。

+   将数学符号转换为 Python。

在此过程中，我们将回顾一些我假设你以前见过的数学主题，如对数和代数。

## 数字

Python 提供了处理许多种类数据的工具，包括数字、单词、日期、时间和位置（纬度和经度）。

让我们从数字开始。Python 可以处理多种类型的数字，但最常见的两种是：

+   `int`，表示像`3`这样的整数值，和

+   `float`，表示具有小数部分的数字，如`3.14159`。

最常见的情况是，我们使用`int`表示计数，使用`float`表示测量值。以下是一个`int`和一个`float`的示例：

```py
3 
```

```py
3 
```

```py
3.14159 
```

```py
3.14159 
```

`float`是“浮点数”的缩写，这是这些数字存储的方式的名称。

## 算术

Python 提供了执行算术运算的运算符。执行加法和减法的运算符是`+`和`-`：

```py
3 + 2 - 1 
```

```py
4 
```

执行乘法和除法的运算符是`*`和`/`：

```py
2 * 3 
```

```py
6 
```

```py
2 / 3 
```

```py
0.6666666666666666 
```

幂运算的运算符是`**`：

```py
2**3 
```

```py
8 
```

与数学符号不同，Python 不允许“隐式乘法”。例如，在数学符号中，如果你写$3 (2 + 1)$，那就等同于$3 \times (2+ 1)$。Python 不允许这种表示。如果你想要相乘，你必须使用`*`运算符。

算术运算符遵循您可能学过的“PEMDAS”的优先规则：

+   括号在前

+   幂运算在前

+   乘法和除法在前

+   加法和减法。

所以在这个表达式中：

```py
1 + 2 * 3 
```

```py
7 
```

首先进行乘法。如果这不是你想要的，你可以使用括号来明确操作的顺序：

```py
(1 + 2) * 3 
```

```py
9 
```

**练习：**编写一个 Python 表达式，将`1+2`的幂提高到`3*4`。答案应该是`531441`。

## 数学函数

Python 提供了计算所有常见数学函数的函数，如`sin`和`cos`，`exp`和`log`。但是，它们不是 Python 本身的一部分；它们在一个**库**中，这是一个补充 Python 语言的函数集。

实际上，有几个提供数学函数的库；我们将使用的是名为 NumPy 的库，它代表“Numerical Python”，发音为“num pie”。在使用库之前，您必须**导入**它。这是我们导入 NumPy 的方法：

```py
import numpy as np 
```

传统上将`numpy`导入为`np`，这意味着我们可以用简短的名称`np`来引用它，而不是较长的名称`numpy`。像这样的名称是区分大小写的，这意味着`numpy`和`NumPy`不是同一个东西。所以即使库的名称是 NumPy，当我们导入它时，我们必须称其为`numpy`。

但是假设我们正确导入了`np`，我们可以使用它来读取值`pi`，这是数学常数$\pi$的近似值。

```py
np.pi 
```

```py
3.141592653589793 
```

结果是一个具有 16 位数字的`float`。您可能知道，我们无法用有限数量的数字表示$\pi$，所以这个结果只是近似值。

NumPy 提供了`log`，它计算自然对数

```py
np.log(100) 
```

```py
4.605170185988092 
```

NumPy 还提供了`exp`，它将常数`e`提高到幂。

```py
np.exp(1) 
```

```py
2.718281828459045 
```

**练习：**使用这些函数来确认数学恒等式$\log(e^x) = x$，这对于任何值$x$都应该成立。

对于浮点值，这个恒等式应该适用于-700 到 700 之间的$x$值。当您尝试使用更大和更小的值时会发生什么？

正如这个例子所示，浮点数是有限的近似值，这意味着它们并不总是像数学那样行为。

举个例子，让我们看看当你三次相加`0.1`时会发生什么：

```py
0.1 + 0.1 + 0.1 
```

```py
0.30000000000000004 
```

结果接近`0.3`，但不是精确的。我们将在以后看到其他浮点数近似的例子，并学习一些处理它的方法。

## 变量

**变量**是指代一个值的名称。以下语句将值`5`赋给名为`x`的变量：

```py
x = 5 
```

我们刚刚创建的变量的名称是`x`，值是`5`。

如果我们将`x`作为算术运算的一部分，它代表值`5`：

```py
x + 1 
```

```py
6 
```

```py
x**2 
```

```py
25 
```

我们还可以将`x`与`numpy`函数一起使用：

```py
np.exp(x) 
```

```py
148.4131591025766 
```

请注意，`exp`的结果是一个`float`，即使`x`的值是一个`int`。

**练习：**如果您以前没有编程经验，您必须习惯于编程语言对细节的挑剔。自然语言，如英语，和半正式语言，如数学符号，更宽容。

例如，在数学符号中，括号和方括号意思相同，你可以写

$\sin (\omega t)$

或

$\sin [\omega t]$

任何一个都可以。只要意思清楚，你可以完全省略括号：

$\sin \omega t$

在 Python 中，每个字符都很重要。例如，以下都是不同的：

```py
np.exp(x)
np.Exp(x)
np.exp[x]
np.exp x 
```

在你学习的过程中，我鼓励你故意犯错，看看会出现什么问题。仔细阅读错误信息。有时它们很有帮助，可以准确告诉你出了什么问题。但有时它们可能会误导你。但如果你之前见过这个消息，你可能会记得一些可能的原因。

**练习：** 搜索 NumPy 文档，找到计算平方根的函数，并使用它来计算黄金比例的浮点数近似值：

$\phi = \frac{1 + \sqrt{5}}{2}$

提示：结果应该接近`1.618`。

## 使用变量进行计算

现在我们将使用变量来解决涉及复利的问题。这可能不是最激动人心的例子，但它使用了我们到目前为止所做的一切，并且复习了指数和对数，这是我们需要的。

如果我们从一个本金数$P$开始，并获得复利，那么在时间$t$结束时的累积总值$V$为：

$V=P\left(1+{\frac {r}{n}}\right)^{nt}$

其中$r$是年利率，$n$是复利频率。

例如，如果你在一家每年复利 3.4%的银行存入了$2,100，我们可以通过定义这些变量来计算 7 年后的余额：

```py
P = 2100
r = 0.034
n = 4
t = 7 
```

以及像这样计算累积总值。

```py
P * (1 + r/n)**(n*t) 
```

```py
2661.6108980682593 
```

**练习：** 继续上一个例子，假设你的本金和利率相同，但利息每年复利两次，所以`n = 2`。在 7 年后，总价值将是多少？提示：我们预计答案会比之前的答案略少。

**练习：** 如果利息是连续复利，时间$t$后的价值由以下公式给出：

$V=P~e^{rt}$

将这个方程翻译成 Python，并用它来计算前面例子中连续复利的投资价值。提示：我们预计答案会比之前的答案略多。

## 总结

本章介绍了变量，它们是指代值的名称，以及两种值，整数和浮点数。

它介绍了数学运算符，比如`+`表示加法，`*`表示乘法，以及数学函数，比如`log`表示对数，`exp`表示将`e`的幂。

在下一章中，我们将看到用于表示字母和单词、日期和时间以及纬度和经度的额外数据类型。
