- en: Inference
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 推断
- en: 原文：[https://allendowney.github.io/ThinkBayes2/chap13.html](https://allendowney.github.io/ThinkBayes2/chap13.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://allendowney.github.io/ThinkBayes2/chap13.html](https://allendowney.github.io/ThinkBayes2/chap13.html)
- en: Whenever people compare Bayesian inference with conventional approaches, one
    of the questions that comes up most often is something like, “What about p-values?”
    And one of the most common examples is the comparison of two groups to see if
    there is a difference in their means.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 每当人们将贝叶斯推断与传统方法进行比较时，最常见的问题之一是：“p值呢？”其中最常见的例子之一是比较两组，看看它们的平均值是否有差异。
- en: In classical statistical inference, the usual tool for this scenario is a [Student’s
    *t*-test](https://en.wikipedia.org/wiki/Student%27s_t-test), and the result is
    a [p-value](https://en.wikipedia.org/wiki/P-value). This process is an example
    of [null hypothesis significance testing](https://en.wikipedia.org/wiki/Statistical_hypothesis_testing).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在经典统计推断中，这种情况的常用工具是[学生的*t*检验](https://en.wikipedia.org/wiki/Student%27s_t-test)，结果是[p值](https://en.wikipedia.org/wiki/P-value)。这个过程是[零假设显著性检验](https://en.wikipedia.org/wiki/Statistical_hypothesis_testing)的一个例子。
- en: A Bayesian alternative is to compute the posterior distribution of the difference
    between the groups. Then we can use that distribution to answer whatever questions
    we are interested in, including the most likely size of the difference, a credible
    interval that’s likely to contain the true difference, the probability of superiority,
    or the probability that the difference exceeds some threshold.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 贝叶斯的替代方法是计算两组之间差异的后验分布。然后我们可以使用该分布来回答我们感兴趣的任何问题，包括差异的最可能大小，可能包含真实差异的可信区间，优越性的概率，或者差异超过某个阈值的概率。
- en: 'To demonstrate this process, I’ll solve a problem borrowed from a statistical
    textbook: evaluating the effect of an educational “treatment” compared to a control.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示这个过程，我将解决一个从统计教科书借来的问题：评估教育“治疗”与对照组的效果。
- en: Improving Reading Ability
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 提高阅读能力
- en: We’ll use data from a [Ph.D. dissertation in educational psychology](https://docs.lib.purdue.edu/dissertations/AAI8807671/)
    written in 1987, which was used as an example in a [statistics textbook](https://books.google.com/books/about/Introduction_to_the_practice_of_statisti.html?id=pGBNhajABlUC)
    from 1989 and published on [DASL](https://web.archive.org/web/20000603124754/http://lib.stat.cmu.edu/DASL/Datafiles/DRPScores.html),
    a web page that collects data stories.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用1987年[教育心理学博士论文](https://docs.lib.purdue.edu/dissertations/AAI8807671/)中的数据，该论文被用作1989年[统计教科书](https://books.google.com/books/about/Introduction_to_the_practice_of_statisti.html?id=pGBNhajABlUC)的例子，并在[DASL](https://web.archive.org/web/20000603124754/http://lib.stat.cmu.edu/DASL/Datafiles/DRPScores.html)上发布，这是一个收集数据故事的网页。
- en: 'Here’s the description from DASL:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是DASL的描述：
- en: An educator conducted an experiment to test whether new directed reading activities
    in the classroom will help elementary school pupils improve some aspects of their
    reading ability. She arranged for a third grade class of 21 students to follow
    these activities for an 8-week period. A control classroom of 23 third graders
    followed the same curriculum without the activities. At the end of the 8 weeks,
    all students took a Degree of Reading Power (DRP) test, which measures the aspects
    of reading ability that the treatment is designed to improve.
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 一位教育工作者进行了一个实验，测试课堂上的新定向阅读活动是否会帮助小学生提高阅读能力的某些方面。她安排了一个由21名学生组成的三年级班级，在8周的时间里进行这些活动。一个由23名三年级学生组成的对照班级在没有这些活动的情况下遵循相同的课程。在8周结束时，所有学生参加了一个度量阅读能力的测试，该测试衡量了治疗旨在改善的阅读能力方面。
- en: The [dataset is available here](https://web.archive.org/web/20000603124754/http://lib.stat.cmu.edu/DASL/Datafiles/DRPScores.html).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[数据集在这里可用](https://web.archive.org/web/20000603124754/http://lib.stat.cmu.edu/DASL/Datafiles/DRPScores.html)。'
- en: I’ll use Pandas to load the data into a `DataFrame`.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用Pandas将数据加载到`DataFrame`中。
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '|  | Treatment | Response |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
  zh: '|  | 治疗 | 反应 |'
- en: '| --- | --- | --- |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| 0 | Treated | 24 |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| 0 | Treated | 24 |'
- en: '| 1 | Treated | 43 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| 1 | Treated | 43 |'
- en: '| 2 | Treated | 58 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| 2 | Treated | 58 |'
- en: The `Treatment` column indicates whether each student was in the treated or
    control group. The `Response` is their score on the test.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '`Treatment`列指示每个学生是在治疗组还是对照组。`Response`是他们在测试中的得分。'
- en: 'I’ll use `groupby` to separate the data for the `Treated` and `Control` groups:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用`groupby`来分离`Treated`和`Control`组的数据：
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Here are CDFs of the scores for the two groups and summary statistics.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这是两组分数的CDF和摘要统计信息。
- en: '[PRE2]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![_images/4b872e5331cd510f2d09a3ab3ffa581f909ebe5a20e51f12a90a42002577fae9.png](../Images/1ee292db46c8c0909e0451626f93c8dd.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![_images/4b872e5331cd510f2d09a3ab3ffa581f909ebe5a20e51f12a90a42002577fae9.png](../Images/1ee292db46c8c0909e0451626f93c8dd.png)'
- en: There is overlap between the distributions, but it looks like the scores are
    higher in the treated group. The distribution of scores is not exactly normal
    for either group, but it is close enough that the normal model is a reasonable
    choice.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个分布之间存在重叠，但看起来治疗组的分数更高。两组的分数分布都不完全符合正态分布，但足够接近，正态模型是一个合理的选择。
- en: So I’ll assume that in the entire population of students (not just the ones
    in the experiment), the distribution of scores is well modeled by a normal distribution
    with unknown mean and standard deviation. I’ll use `mu` and `sigma` to denote
    these unknown parameters, and we’ll do a Bayesian update to estimate what they
    are.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我将假设在整个学生群体中（不仅仅是实验中的学生），分数的分布可以很好地由未知均值和标准差的正态分布模拟。我将使用`mu`和`sigma`来表示这些未知参数，并且我们将进行贝叶斯更新来估计它们。
- en: Estimating Parameters
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 估计参数
- en: As always, we need a prior distribution for the parameters. Since there are
    two parameters, it will be a joint distribution. I’ll construct it by choosing
    marginal distributions for each parameter and computing their outer product.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 和往常一样，我们需要参数的先验分布。由于有两个参数，它将是一个联合分布。我将通过为每个参数选择边际分布并计算它们的外积来构造它。
- en: As a simple starting place, I’ll assume that the prior distributions for `mu`
    and `sigma` are uniform. The following function makes a `Pmf` object that represents
    a uniform distribution.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个简单的起点，我将假设`mu`和`sigma`的先验分布是均匀的。以下函数制作了代表均匀分布的`Pmf`对象。
- en: '[PRE3]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '`make_uniform` takes as parameters'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '`make_uniform`接受参数'
- en: An array of quantities, `qs`, and
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个数量的数组，`qs`，和
- en: A string, `name`, which is assigned to the index so it appears when we display
    the `Pmf`.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个字符串，`name`，它被分配给索引，所以当我们显示`Pmf`时它会出现。
- en: 'Here’s the prior distribution for `mu`:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这是`mu`的先验分布：
- en: '[PRE4]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: I chose the lower and upper bounds by trial and error. I’ll explain how when
    we look at the posterior distribution.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我通过试错选择了下限和上限。我们在查看后验分布时会解释这个过程。
- en: 'Here’s the prior distribution for `sigma`:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这是`sigma`的先验分布：
- en: '[PRE5]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Now we can use `make_joint` to make the joint prior distribution.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以使用`make_joint`来制作联合先验分布。
- en: '[PRE6]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: And we’ll start by working with the data from the control group.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从对照组的数据开始。
- en: '[PRE7]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: In the next section we’ll compute the likelihood of this data for each pair
    of parameters in the prior distribution.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将计算先验分布中每对参数的数据的似然。
- en: Likelihood
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 似然
- en: We would like to know the probability of each score in the dataset for each
    hypothetical pair of values, `mu` and `sigma`. I’ll do that by making a 3-dimensional
    grid with values of `mu` on the first axis, values of `sigma` on the second axis,
    and the scores from the dataset on the third axis.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要知道数据集中每个分数在每个假设的`mu`和`sigma`值对中的概率。我将通过在第一个轴上使用`mu`的值，在第二个轴上使用`sigma`的值，并在第三个轴上使用数据集中的分数来制作一个三维网格来做到这一点。
- en: '[PRE9]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Now we can use `norm.pdf` to compute the probability density of each score for
    each hypothetical pair of parameters.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以使用`norm.pdf`来计算每个假设参数对应的每个分数的概率密度。
- en: '[PRE11]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The result is a 3-D array. To compute likelihoods, I’ll multiply these densities
    along `axis=2`, which is the axis of the data:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个3-D数组。为了计算似然，我将沿着`axis=2`相乘这些密度，这是数据的轴：
- en: '[PRE13]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The result is a 2-D array that contains the likelihood of the entire dataset
    for each hypothetical pair of parameters.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个包含每个假设参数对应的整个数据集的似然的2-D数组。
- en: 'We can use this array to update the prior, like this:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用这个数组来更新先验，就像这样：
- en: '[PRE15]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The result is a `DataFrame` that represents the joint posterior distribution.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个代表联合后验分布的`DataFrame`。
- en: The following function encapsulates these steps.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数封装了这些步骤。
- en: '[PRE17]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Here are the updates for the control and treatment groups:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这是对照组和治疗组的更新：
- en: '[PRE18]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'And here’s what they look like:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这是它们的样子：
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码隐藏代码单元格源代码</summary>
- en: '[PRE20]</details> ![_images/07e09a7764bf63bd25d2de096380ab1b98da662b35273b5a5f32f41b7c0c928d.png](../Images/40c70f90c0bd3e979a2c0296876ae3c2.png)'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE20]</details> ![_images/07e09a7764bf63bd25d2de096380ab1b98da662b35273b5a5f32f41b7c0c928d.png](../Images/40c70f90c0bd3e979a2c0296876ae3c2.png)'
- en: Along the \(x\)-axis, it looks like the mean score for the treated group is
    higher. Along the \(y\)-axis, it looks like the standard deviation for the treated
    group is lower.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 沿着\(x\)-轴，看起来处理组的平均分数更高。沿着\(y\)-轴，看起来处理组的标准差更低。
- en: If we think the treatment causes these differences, the data suggest that the
    treatment increases the mean of the scores and decreases their spread. We can
    see these differences more clearly by looking at the marginal distributions for
    `mu` and `sigma`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们认为治疗导致了这些差异，数据表明治疗增加了分数的平均值并减少了它们的波动。我们可以通过查看`mu`和`sigma`的边际分布更清楚地看到这些差异。
- en: Posterior Marginal Distributions
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 后验边际分布
- en: I’ll use `marginal`, which we saw in <<_MarginalDistributions>>, to extract
    the posterior marginal distributions for the population means.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 我将使用`marginal`，我们在<<_MarginalDistributions>>中看到的，来提取人口均值的后验边际分布。
- en: '[PRE21]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Here’s what they look like:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 这是它们的样子：
- en: '[PRE22]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![_images/74533c73c49e8633b077b14653127429555b9df95ce634788a96f4f047d6c063.png](../Images/681405482ffc61c5b3d2bae884d8f290.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![_images/74533c73c49e8633b077b14653127429555b9df95ce634788a96f4f047d6c063.png](../Images/681405482ffc61c5b3d2bae884d8f290.png)'
- en: In both cases the posterior probabilities at the ends of the range are near
    zero, which means that the bounds we chose for the prior distribution are wide
    enough.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，范围末端的后验概率接近零，这意味着我们选择的先验分布的边界足够宽。
- en: 'Comparing the marginal distributions for the two groups, it looks like the
    population mean in the treated group is higher. We can use `prob_gt` to compute
    the probability of superiority:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 比较两组的边际分布，看起来处理组的人口均值更高。我们可以使用`prob_gt`来计算优越性的概率：
- en: '[PRE23]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: There is a 98% chance that the mean in the treated group is higher.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 有98%的机会处理组的平均值更高。
- en: Distribution of Differences
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 差异的分布
- en: To quantify the magnitude of the difference between groups, we can use `sub_dist`
    to compute the distribution of the difference.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 为了量化组之间差异的大小，我们可以使用`sub_dist`来计算差异的分布。
- en: '[PRE25]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: There are two things to be careful about when you use methods like `sub_dist`.
    The first is that the result usually contains more elements than the original
    `Pmf`.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 当您使用`sub_dist`等方法时，有两件事需要注意。第一点是结果通常包含比原始`Pmf`更多的元素。
- en: In this example, the original distributions have the same quantities, so the
    size increase is moderate.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，原始分布具有相同的数量，因此大小增加是适度的。
- en: '[PRE26]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: In the worst case, the size of the result can be the product of the sizes of
    the originals.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 在最坏的情况下，结果的大小可以是原始大小的乘积。
- en: The other thing to be careful about is plotting the `Pmf`. In this example,
    if we plot the distribution of differences, the result is pretty noisy.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 另一件需要注意的事情是绘制`Pmf`。在这个例子中，如果我们绘制差异的分布，结果会非常嘈杂。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码隐藏代码单元格源代码</summary>
- en: '[PRE28]</details> ![_images/17719b39d2db8694dcd3465576ab0f6848ab5bac7aaf1e6ca9c26bd616f14290.png](../Images/d3285bcfff528c7a281a867a76d7fade.png)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE28]</details> ![_images/17719b39d2db8694dcd3465576ab0f6848ab5bac7aaf1e6ca9c26bd616f14290.png](../Images/d3285bcfff528c7a281a867a76d7fade.png)'
- en: 'There are two ways to work around that limitation. One is to plot the CDF,
    which smooths out the noise:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 有两种方法可以解决这个限制。一种是绘制CDF，这样可以平滑噪音：
- en: '[PRE29]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码隐藏代码单元格源代码</summary>
- en: '[PRE30]</details> ![_images/7853b02a168362d7aaa22b1dc7b901dbf56554e8005a90aa2de857eac0221020.png](../Images/42384d504f6b67b8a8222412cdbf17ed.png)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE30]</details> ![_images/7853b02a168362d7aaa22b1dc7b901dbf56554e8005a90aa2de857eac0221020.png](../Images/42384d504f6b67b8a8222412cdbf17ed.png)'
- en: 'The other option is to use kernel density estimation (KDE) to make a smooth
    approximation of the PDF on an equally-spaced grid, which is what this function
    does:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选择是使用核密度估计（KDE）在等间距网格上对PDF进行平滑近似，这就是这个函数的作用：
- en: '[PRE31]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '`kde_from_pmf` takes as parameters a `Pmf` and the number of places to evaluate
    the KDE.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '`kde_from_pmf`以`Pmf`和要评估KDE的位置数作为参数。'
- en: It uses `gaussian_kde`, which we saw in <<_KernelDensityEstimation>>, passing
    the probabilities from the `Pmf` as weights. This makes the estimated densities
    higher where the probabilities in the `Pmf` are higher.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 它使用了`gaussian_kde`，我们在<<_KernelDensityEstimation>>中看到了，将`Pmf`中的概率作为权重传递。这使得在`Pmf`中概率较高的地方，估计的密度更高。
- en: Here’s what the kernel density estimate looks like for the `Pmf` of differences
    between the groups.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这是`Pmf`之间差异的核密度估计的样子。
- en: '[PRE32]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码隐藏代码单元格源代码</summary>
- en: '[PRE33]</details> ![_images/96237655b97311f4d9c0571002cba9f1f1bf1b50c9e4c69c7f47bdd4235cce83.png](../Images/750833c43967521c794d8e009b3bc6d2.png)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE33]</details> ![_images/96237655b97311f4d9c0571002cba9f1f1bf1b50c9e4c69c7f47bdd4235cce83.png](../Images/750833c43967521c794d8e009b3bc6d2.png)'
- en: The mean of this distribution is almost 10 points on a test where the mean is
    around 45, so the effect of the treatment seems to be substantial.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 这个分布的均值几乎是测试中的45分的10分，因此治疗的效果似乎是显著的。
- en: '[PRE34]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: We can use `credible_interval` to compute a 90% credible interval.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`credible_interval`来计算90%的可信区间。
- en: '[PRE36]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '[PRE37]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Based on this interval, we are pretty sure the treatment improves test scores
    by 2 to 17 points.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这个区间，我们相当确定治疗可以使测试分数提高2到17分。
- en: Using Summary Statistics
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用总结统计
- en: In this example the dataset is not very big, so it doesn’t take too long to
    compute the probability of every score under every hypothesis. But the result
    is a 3-D array; for larger datasets, it might be too big to compute practically.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，数据集并不是很大，因此计算每个假设下每个分数的概率并不需要太长时间。但结果是一个3-D数组；对于更大的数据集，实际上可能太大而无法实际计算。
- en: Also, with larger datasets the likelihoods get very small, sometimes so small
    that we can’t compute them with floating-point arithmetic. That’s because we are
    computing the probability of a particular dataset; the number of possible datasets
    is astronomically big, so the probability of any of them is very small.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，对于更大的数据集，可能性会变得非常小，有时甚至小到我们无法用浮点运算来计算。这是因为我们正在计算特定数据集的概率；可能的数据集数量是天文数字级别的，因此它们的概率非常小。
- en: An alternative is to compute a summary of the dataset and compute the likelihood
    of the summary. For example, if we compute the mean and standard deviation of
    the data, we can compute the likelihood of those summary statistics under each
    hypothesis.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种选择是计算数据集的摘要并计算摘要的可能性。例如，如果我们计算数据的均值和标准差，我们可以计算每个假设下这些摘要统计的可能性。
- en: As an example, suppose we know that the actual mean of the population, \(\mu\),
    is 42 and the actual standard deviation, \(\sigma\), is 17.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设我们知道人口的实际均值\(\mu\)是42，实际标准差\(\sigma\)是17。
- en: '[PRE38]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: Now suppose we draw a sample from this distribution with sample size `n=20`,
    and compute the mean of the sample, which I’ll call `m`, and the standard deviation
    of the sample, which I’ll call `s`.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 现在假设我们从这个分布中抽取一个样本，样本大小为`n=20`，并计算样本的均值，我将其称为`m`，以及样本的标准差，我将其称为`s`。
- en: 'And suppose it turns out that:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 假设结果是：
- en: '[PRE39]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: The summary statistics, `m` and `s`, are not too far from the parameters \(\mu\)
    and \(\sigma\), so it seems like they are not too unlikely.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 摘要统计`m`和`s`与参数\(\mu\)和\(\sigma\)相差不远，因此它们似乎不太可能。
- en: 'To compute their likelihood, we will take advantage of three results from mathematical
    statistics:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 为了计算它们的可能性，我们将利用数理统计的三个结果：
- en: Given \(\mu\) and \(\sigma\), the distribution of `m` is normal with parameters
    \(\mu\) and \(\sigma/\sqrt{n}\);
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 给定\(\mu\)和\(\sigma\)，`m`的分布是具有参数\(\mu\)和\(\sigma/\sqrt{n}\)的正态分布；
- en: The distribution of \(s\) is more complicated, but if we compute the transform
    \(t = n s^2 / \sigma^2\), the distribution of \(t\) is chi-squared with parameter
    \(n-1\); and
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: \(s\)的分布更复杂，但如果我们计算变换\(t = n s^2 / \sigma^2\)，\(t\)的分布是具有参数\(n-1\)的卡方分布；以及
- en: According to [Basu’s theorem](https://en.wikipedia.org/wiki/Basu%27s_theorem),
    `m` and `s` are independent.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据[巴苏定理](https://en.wikipedia.org/wiki/Basu%27s_theorem)，`m`和`s`是独立的。
- en: So let’s compute the likelihood of `m` and `s` given \(\mu\) and \(\sigma\).
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，让我们计算给定\(\mu\)和\(\sigma\)的`m`和`s`的可能性。
- en: First I’ll create a `norm` object that represents the distribution of `m`.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我将创建一个代表`m`分布的`norm`对象。
- en: '[PRE40]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: This is the “sampling distribution of the mean”. We can use it to compute the
    likelihood of the observed value of `m`, which is 41.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这是“均值的抽样分布”。我们可以用它来计算观察到的`m`值的可能性，即41。
- en: '[PRE41]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '[PRE42]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'Now let’s compute the likelihood of the observed value of `s`, which is 18.
    First, we compute the transformed value `t`:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们计算观察到的`s`值的可能性，即18。首先，我们计算变换后的值`t`：
- en: '[PRE43]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[PRE44]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Then we create a `chi2` object to represent the distribution of `t`:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们创建一个代表`t`分布的`chi2`对象：
- en: '[PRE45]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Now we can compute the likelihood of `t`:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以计算`t`的似然性：
- en: '[PRE46]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[PRE47]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Finally, because `m` and `s` are independent, their joint likelihood is the
    product of their likelihoods:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，因为`m`和`s`是独立的，它们的联合似然性是它们各自似然性的乘积：
- en: '[PRE48]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '[PRE49]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: Now we can compute the likelihood of the data for any values of \(\mu\) and
    \(\sigma\), which we’ll use in the next section to do the update.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以计算任何\(\mu\)和\(\sigma\)值的数据的似然性，我们将在下一节中使用它们进行更新。
- en: Update with Summary Statistics
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用摘要统计数据进行更新
- en: Now we’re ready to do an update. I’ll compute summary statistics for the two
    groups.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备进行更新。我将计算两组的摘要统计数据。
- en: '[PRE50]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: The result is a dictionary that maps from group name to a tuple that contains
    the sample size, `n`, the sample mean, `m`, and the sample standard deviation
    `s`, for each group.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个字典，将组名映射到一个包含样本量`n`、样本均值`m`和样本标准差`s`的元组，对于每个组。
- en: I’ll demonstrate the update with the summary statistics from the control group.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我将演示使用对照组的摘要统计数据进行更新。
- en: '[PRE52]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: I’ll make a mesh with hypothetical values of `mu` on the `x` axis and values
    of `sigma` on the `y` axis.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我将用`x`轴上的`mu`的假设值和`y`轴上的`sigma`值创建一个网格。
- en: '[PRE53]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Now we can compute the likelihood of seeing the sample mean, `m`, for each pair
    of parameters.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以计算每对参数的样本均值`m`的似然性。
- en: '[PRE55]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: And we can compute the likelihood of the sample standard deviation, `s`, for
    each pair of parameters.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以计算每对参数的样本标准差`s`的似然性。
- en: '[PRE57]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-157
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'Finally, we can do the update with both likelihoods:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们可以用两个似然性进行更新：
- en: '[PRE59]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'To compute the posterior distribution for the treatment group, I’ll put the
    previous steps in a function:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 计算治疗组的后验分布，我将把之前的步骤放在一个函数中：
- en: '[PRE60]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Here’s the update for the treatment group:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这是治疗组的更新：
- en: '[PRE61]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: And here are the results.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是结果。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码
    隐藏代码单元格源代码</summary>
- en: '[PRE62]</details> ![_images/788f06239c80c1669cae10247482f0fb684c52288c1b0713b213e62821d3eb15.png](../Images/2e0ea03c4df7f105c2b86b60db36f8a2.png)'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE62]</details> ![_images/788f06239c80c1669cae10247482f0fb684c52288c1b0713b213e62821d3eb15.png](../Images/2e0ea03c4df7f105c2b86b60db36f8a2.png)'
- en: Visually, these posterior joint distributions are similar to the ones we computed
    using the entire dataset, not just the summary statistics. But they are not exactly
    the same, as we can see by comparing the marginal distributions.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 从视觉上看，这些后验联合分布与我们使用整个数据集计算的分布相似，而不仅仅是摘要统计数据。但它们并不完全相同，我们可以通过比较边际分布来看到这一点。
- en: Comparing Marginals
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较边际分布
- en: Again, let’s extract the marginal posterior distributions.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，让我们提取边际后验分布。
- en: '[PRE63]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: And compare them to results we got using the entire dataset (the dashed lines).
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 并将它们与使用整个数据集得到的结果进行比较（虚线）。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell source Hide code cell source</summary>
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格源代码
    隐藏代码单元格源代码</summary>
- en: '[PRE64]</details> ![_images/8905b82ef04dd79130d1cebbad78367aafe809a8fda9f1cb4c4ed2011ae0311c.png](../Images/7a53a9d55b1e248b3131381791fe1a63.png)'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE64]</details> ![_images/8905b82ef04dd79130d1cebbad78367aafe809a8fda9f1cb4c4ed2011ae0311c.png](../Images/7a53a9d55b1e248b3131381791fe1a63.png)'
- en: The posterior distributions based on summary statistics are similar to the posteriors
    we computed using the entire dataset, but in both cases they are shorter and a
    little wider.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 基于摘要统计数据的后验分布与我们使用整个数据集计算的后验分布相似，但在两种情况下都更短且略宽。
- en: That’s because the update with summary statistics is based on the implicit assumption
    that the distribution of the data is normal. But it’s not; as a result, when we
    replace the dataset with the summary statistics, we lose some information about
    the true distribution of the data. With less information, we are less certain
    about the parameters.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为使用摘要统计数据进行更新是基于数据分布是正态分布的隐含假设。但实际上并不是这样；因此，当我们用摘要统计数据替换数据集时，我们会丢失一些关于真实数据分布的信息。信息越少，我们对参数的确定性就越低。
- en: Proof By Simulation
  id: totrans-176
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通过模拟证明
- en: 'The update with summary statistics is based on theoretical distributions, and
    it seems to work, but I think it is useful to test theories like this, for a few
    reasons:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 使用摘要统计数据进行更新是基于理论分布的，而且似乎是有效的，但我认为测试这样的理论是有用的，有几个原因：
- en: It confirms that our understanding of the theory is correct,
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它证实了我们对理论的理解是正确的，
- en: It confirms that the conditions where we apply the theory are conditions where
    the theory holds,
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它证实了我们应用理论的条件是理论成立的，
- en: It confirms that the implementation details are correct. For many distributions,
    there is more than one way to specify the parameters. If you use the wrong specification,
    this kind of testing will help you catch the error.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它证实了实现细节是正确的。对于许多分布，有多种指定参数的方法。如果使用了错误的规范，这种测试将帮助您捕捉错误。
- en: In this section I’ll use simulations to show that the distribution of the sample
    mean and standard deviation is as I claimed. But if you want to take my word for
    it, you can skip this section and the next.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我将使用模拟来展示样本均值和标准差的分布如我所说的那样。但是如果你愿意相信我的话，你可以跳过这一节和下一节。
- en: 'Let’s suppose that we know the actual mean and standard deviation of the population:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们知道总体的实际均值和标准差：
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE65]</details>'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE65]</details>'
- en: I’ll create a `norm` object to represent this distribution.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 我将创建一个`norm`对象来表示这个分布。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE66]</details>'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE66]</details>'
- en: '`norm` provides `rvs`, which generates random values from the distribution.
    We can use it to simulate 1000 samples, each with sample size `n=20`.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '`norm`提供了`rvs`，它可以从分布中生成随机值。我们可以用它来模拟1000个样本，每个样本的样本量为`n=20`。'
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE67]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]</details>'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE68]</details>'
- en: The result is an array with 1000 rows, each containing a sample or 20 simulated
    test scores.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个包含1000行的数组，每行包含一个样本或20个模拟测试分数。
- en: If we compute the mean of each row, the result is an array that contains 1000
    sample means; that is, each value is the mean of a sample with `n=20`.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们计算每行的平均值，结果将是一个包含1000个样本均值的数组；也就是说，每个值都是一个样本的均值，样本量为`n=20`。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE69]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '[PRE70]</details>'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE70]</details>'
- en: 'Now, let’s compare the distribution of these means to `dist_m`. I’ll use `pmf_from_dist`
    to make a discrete approximation of `dist_m`:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们将这些均值的分布与`dist_m`进行比较。我将使用`pmf_from_dist`来对`dist_m`进行离散近似：
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE71]</details>'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE71]</details>'
- en: '`pmf_from_dist` takes an object representing a continuous distribution, evaluates
    its probability density function at equally space points between `low` and `high`,
    and returns a normalized `Pmf` that approximates the distribution.'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '`pmf_from_dist`接受一个表示连续分布的对象，在`low`和`high`之间的等间距点上评估其概率密度函数，并返回一个近似分布的归一化`Pmf`。'
- en: I’ll use it to evaluate `dist_m` over a range of six standard deviations.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 我将用它来评估`dist_m`在六个标准差范围内的情况。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE72]</details>'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE72]</details>'
- en: Now let’s compare this theoretical distribution to the means of the samples.
    I’ll use `kde_from_sample` to estimate their distribution and evaluate it in the
    same locations as `pmf_m`.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们将这个理论分布与样本的均值进行比较。我将使用`kde_from_sample`来估计它们的分布，并在与`pmf_m`相同的位置进行评估。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE73]</details>'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE73]</details>'
- en: The following figure shows the two distributions.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图显示了这两个分布。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE74]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '![_images/52c43bd9abdda9201e2072a09dfb286e5850cae41d61da3a6e7ad355b77b20fd.png](../Images/fdd44a246bef6bcdc55cc9a74e4b2d62.png)</details>'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/52c43bd9abdda9201e2072a09dfb286e5850cae41d61da3a6e7ad355b77b20fd.png](../Images/fdd44a246bef6bcdc55cc9a74e4b2d62.png)</details>'
- en: The theoretical distribution and the distribution of sample means are in accord.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 理论分布和样本均值的分布是一致的。
- en: Checking Standard Deviation
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 检查标准差
- en: Let’s also check that the standard deviations follow the distribution we expect.
    First I’ll compute the standard deviation for each of the 1000 samples.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还要检查一下标准差是否符合我们的预期分布。首先，我将计算1000个样本的标准差。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE75]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[PRE76]</details>'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE76]</details>'
- en: Now we’ll compute the transformed values, \(t = n s^2 / \sigma^2\).
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将计算转换后的值，\(t = n s^2 / \sigma^2\)。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE77]</details>'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE77]</details>'
- en: We expect the transformed values to follow a chi-square distribution with parameter
    \(n-1\). SciPy provides `chi2`, which we can use to represent this distribution.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 我们期望转换后的值遵循参数为\(n-1\)的卡方分布。SciPy提供了`chi2`，我们可以用它来表示这个分布。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE78]</details>'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE78]</details>'
- en: We can use `pmf_from_dist` again to make a discrete approximation.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以再次使用`pmf_from_dist`进行离散近似。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE79]</details>'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE79]</details>'
- en: And we’ll use `kde_from_sample` to estimate the distribution of the sample standard
    deviations.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用`kde_from_sample`来估计样本标准差的分布。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE80]</details>'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE80]</details>'
- en: Now we can compare the theoretical distribution to the distribution of the standard
    deviations.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以将理论分布与标准差的分布进行比较。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE81]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '![_images/8ff5ec2be08b5f2cd8763610a22cb2b6ded0e4ca76da07bb4cad7a56cb1eb824.png](../Images/23e05aba19a5fbc1b39471ad7eefc69b.png)</details>'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/8ff5ec2be08b5f2cd8763610a22cb2b6ded0e4ca76da07bb4cad7a56cb1eb824.png](../Images/23e05aba19a5fbc1b39471ad7eefc69b.png)</details>'
- en: The distribution of transformed standard deviations agrees with the theoretical
    distribution.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 转换后的标准差的分布与理论分布一致。
- en: 'Finally, to confirm that the sample means and standard deviations are independent,
    I’ll compute their coefficient of correlation:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，为了确认样本均值和标准差是独立的，我将计算它们的相关系数：
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE82]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '[PRE83]</details>'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE83]</details>'
- en: Their correlation is near zero, which is consistent with their being independent.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 它们的相关性接近零，这与它们是独立的一致。
- en: So the simulations confirm the theoretical results we used to do the update
    with summary statistics.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，模拟结果证实了我们用来使用摘要统计数据进行更新的理论结果。
- en: We can also use `kdeplot` from Seaborn to see what their joint distribution
    looks like.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以使用Seaborn中的`kdeplot`来查看它们的联合分布是什么样子的。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE84]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '![_images/33bcff608384ba34050242a14176f0c7647ce9109c68aeb3c3041ca19defb6e6.png](../Images/1ec87303e4aed28ef3f8cf8cf945490d.png)</details>'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/33bcff608384ba34050242a14176f0c7647ce9109c68aeb3c3041ca19defb6e6.png](../Images/1ec87303e4aed28ef3f8cf8cf945490d.png)</details>'
- en: It looks like the axes of the ellipses are aligned with the axes, which indicates
    that the variables are independent.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 看起来椭圆的轴与坐标轴对齐，这表明变量是独立的。
- en: Summary
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter we used a joint distribution to represent prior probabilities
    for the parameters of a normal distribution, `mu` and `sigma`. And we updated
    that distribution two ways: first using the entire dataset and the normal PDF;
    then using summary statistics, the normal PDF, and the chi-square PDF. Using summary
    statistics is computationally more efficient, but it loses some information in
    the process.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们使用联合分布来表示正态分布的参数`mu`和`sigma`的先验概率。然后我们以两种方式更新了该分布：首先使用整个数据集和正态PDF；然后使用摘要统计数据、正态PDF和卡方PDF。使用摘要统计数据在计算上更有效，但在过程中会丢失一些信息。
- en: Normal distributions appear in many domains, so the methods in this chapter
    are broadly applicable. The exercises at the end of the chapter will give you
    a chance to apply them.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 正态分布出现在许多领域，因此本章中的方法具有广泛的适用性。本章末尾的练习将让您有机会应用它们。
- en: Exercises
  id: totrans-248
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习
- en: '**Exercise:** Looking again at the posterior joint distribution of `mu` and
    `sigma`, it seems like the standard deviation of the treated group might be lower;
    if so, that would suggest that the treatment is more effective for students with
    lower scores.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：** 再次查看`mu`和`sigma`的后验联合分布，似乎处理组的标准差可能较低；如果是这样，那就表明对于分数较低的学生，治疗更有效。'
- en: But before we speculate too much, we should estimate the size of the difference
    and see whether it might actually be 0.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 但在我们进行过多推测之前，我们应该估计差异的大小，并查看它是否实际上可能为0。
- en: Extract the marginal posterior distributions of `sigma` for the two groups.
    What is the probability that the standard deviation is higher in the control group?
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 提取两组的`sigma`的边际后验分布。控制组的标准差更高的概率是多少？
- en: Compute the distribution of the difference in `sigma` between the two groups.
    What is the mean of this difference? What is the 90% credible interval?
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 计算两组之间`sigma`的差异的分布。这种差异的均值是多少？90%的可信区间是多少？
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE85]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE85]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE86]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '![_images/308308b6ecac3d93df676f436d6bdcb155063578cbf2f3436b0836d41eadb098.png](../Images/28f980c6489e761e5e36d9cac4408fec.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/308308b6ecac3d93df676f436d6bdcb155063578cbf2f3436b0836d41eadb098.png](../Images/28f980c6489e761e5e36d9cac4408fec.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE87]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE88]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE89]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE89]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE90]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE91]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE92]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: '[PRE93]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE93]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE94]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: '![_images/4a41f5f62c4bf9c935fcc913296e6af4942eeac649bc5a0689dca131f81d3784.png](../Images/f8db324dc26895f255a7e1e081881c19.png)</details>'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/4a41f5f62c4bf9c935fcc913296e6af4942eeac649bc5a0689dca131f81d3784.png](../Images/f8db324dc26895f255a7e1e081881c19.png)</details>'
- en: '**Exercise:** An [effect size](http://en.wikipedia.org/wiki/Effect_size) is
    a statistic intended to quantify the magnitude of a phenomenon. If the phenomenon
    is a difference in means between two groups, a common way to quantify it is Cohen’s
    effect size, denoted \(d\).'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：** [效应大小](http://en.wikipedia.org/wiki/Effect_size)是一种旨在量化现象大小的统计量。如果现象是两组之间均值的差异，一种常见的量化方法是科恩效应大小，表示为\(d\)。'
- en: If the parameters for Group 1 are \((\mu_1, \sigma_1)\), and the parameters
    for Group 2 are \((\mu_2, \sigma_2)\), Cohen’s effect size is
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 如果第1组的参数为\((\mu_1, \sigma_1)\)，第2组的参数为\((\mu_2, \sigma_2)\)，则科恩效应大小为
- en: \[ d = \frac{\mu_1 - \mu_2}{(\sigma_1 + \sigma_2)/2} \]
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: \[ d = \frac{\mu_1 - \mu_2}{(\sigma_1 + \sigma_2)/2} \]
- en: Use the joint posterior distributions for the two groups to compute the posterior
    distribution for Cohen’s effect size.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 使用两组的联合后验分布来计算 Cohen's effect size 的后验分布。
- en: If we try enumerate all pairs from the two distributions, it takes too long
    so we’ll use random sampling.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们尝试枚举两个分布中的所有对，那将会花费太长时间，所以我们将使用随机抽样。
- en: The following function takes a joint posterior distribution and returns a sample
    of pairs. It uses some features we have not seen yet, but you can ignore the details
    for now.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数接受联合后验分布并返回一对样本。它使用了一些我们还没有看到的特性，但您现在可以忽略细节。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容隐藏代码单元格内容</summary>
- en: '[PRE95]</details>'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE95]</details>'
- en: Here’s how we can use it to sample pairs from the posterior distributions for
    the two groups.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们如何使用它从两个组的后验分布中抽样对。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容隐藏代码单元格内容</summary>
- en: '[PRE96]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: '[PRE97]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE97]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE98]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '[PRE99]</details>'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE99]</details>'
- en: The result is an array of tuples, where each tuple contains a possible pair
    of values for \(\mu\) and \(\sigma\). Now you can loop through the samples, compute
    the Cohen effect size for each, and estimate the distribution of effect sizes.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一个元组数组，每个元组包含\(\mu\)和\(\sigma\)的一对可能值。现在您可以循环遍历样本，计算每个样本的Cohen effect size，并估计effect
    sizes的分布。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容隐藏代码单元格内容</summary>
- en: '[PRE100]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE100]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE101]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: '[PRE102]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE102]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE103]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE103]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE104]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '![_images/93749567d15a59d942c9592d5f736a75613b185134d0b1aa9cbc0cd0964b767c.png](../Images/9d80ca54302ffbc494cce5aa63d81ebf.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/93749567d15a59d942c9592d5f736a75613b185134d0b1aa9cbc0cd0964b767c.png](../Images/9d80ca54302ffbc494cce5aa63d81ebf.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE105]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: '[PRE106]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE106]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE107]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: '[PRE108]</details>'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE108]</details>'
- en: '**Exercise:** This exercise is inspired by [a question that appeared on Reddit](https://www.reddit.com/r/statistics/comments/hcvl2j/q_reverse_empirical_distribution_rule_question/).'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：** 这个练习受到了[Reddit上出现的一个问题](https://www.reddit.com/r/statistics/comments/hcvl2j/q_reverse_empirical_distribution_rule_question/)的启发。'
- en: An instructor announces the results of an exam like this, “The average score
    on this exam was 81\. Out of 25 students, 5 got more than 90, and I am happy to
    report that no one failed (got less than 60).”
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 一位教师宣布了这样一场考试的结果：“这次考试的平均分是81。在25名学生中，有5人得分超过90，我很高兴地报告说没有人不及格（得分低于60）。”
- en: Based on this information, what do you think the standard deviation of scores
    was?
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 根据这些信息，您认为分数的标准差是多少？
- en: You can assume that the distribution of scores is approximately normal. And
    let’s assume that the sample mean, 81, is actually the population mean, so we
    only have to estimate `sigma`.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以假设分数的分布大致是正态的。让我们假设样本均值81实际上是总体均值，因此我们只需要估计`sigma`。
- en: 'Hint: To compute the probability of a score greater than 90, you can use `norm.sf`,
    which computes the survival function, also known as the complementary CDF, or
    `1 - cdf(x)`.'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 提示：要计算得分大于90的概率，您可以使用`norm.sf`，它计算生存函数，也称为互补CDF，或`1 - cdf(x)`。
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容隐藏代码单元格内容</summary>
- en: '[PRE109]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE109]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE110]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '[PRE111]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE111]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE112]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: '[PRE113]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE113]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE114]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '[PRE115]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE115]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容隐藏代码单元格内容</summary>'
- en: '[PRE116]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '![_images/0abfd6d388bcc11c2cbc5a5bdff47d10cd98504e0d8303178e9038f9087c54f0.png](../Images/b9d7be510e4f972bddbd47c8a8091418.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/0abfd6d388bcc11c2cbc5a5bdff47d10cd98504e0d8303178e9038f9087c54f0.png](../Images/b9d7be510e4f972bddbd47c8a8091418.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE117]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE117]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE118]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE118]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE119]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: '![_images/f8dada047905f5f85c2e5f21efb160f4b275e94cf4fc642523008abe432780be.png](../Images/9f0bdab9a77306788bab7542713052c9.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/f8dada047905f5f85c2e5f21efb160f4b275e94cf4fc642523008abe432780be.png](../Images/9f0bdab9a77306788bab7542713052c9.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE120]'
  id: totrans-311
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: '[PRE121]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE121]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE122]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '![_images/ac9958f8a232e0d024b18dd3b11c95ce2fd3980d1f0a54a3a1a50dc89a315070.png](../Images/fe30c4209d494fdc71e03f110b65e357.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/ac9958f8a232e0d024b18dd3b11c95ce2fd3980d1f0a54a3a1a50dc89a315070.png](../Images/fe30c4209d494fdc71e03f110b65e357.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE123]'
  id: totrans-315
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: '[PRE124]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE124]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE125]'
  id: totrans-317
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: '[PRE126]</details>'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE126]</details>'
- en: '**Exercise:** The [Variability Hypothesis](http://en.wikipedia.org/wiki/Variability_hypothesis)
    is the observation that many physical traits are more variable among males than
    among females, in many species.'
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：** [变异性假设](http://en.wikipedia.org/wiki/Variability_hypothesis) 是这样一个观察：在许多物种中，许多生理特征在雄性中的变异性比在雌性中更大。'
- en: It has been a subject of controversy since the early 1800s, which suggests an
    exercise we can use to practice the methods in this chapter. Let’s look at the
    distribution of heights for men and women in the U.S. and see who is more variable.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 自19世纪初以来，这一直是一个有争议的话题，这表明我们可以使用本章中的方法进行练习。让我们看看美国男性和女性的身高分布，看看谁的变异性更大。
- en: I used 2018 data from the CDC’s [Behavioral Risk Factor Surveillance System](https://www.cdc.gov/brfss/annual_data/annual_2018.html)
    (BRFSS), which includes self-reported heights from 154 407 men and 254 722 women.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 我使用了2018年来自CDC的[行为风险因素监测系统](https://www.cdc.gov/brfss/annual_data/annual_2018.html)（BRFSS）的数据，其中包括来自154407名男性和254722名女性的自报身高。
- en: 'Here’s what I found:'
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我找到的：
- en: The average height for men is 178 cm; the average height for women is 163 cm.
    So men are taller on average; no surprise there.
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 男性的平均身高为178厘米；女性的平均身高为163厘米。因此，男性的平均身高更高；这并不奇怪。
- en: For men the standard deviation is 8.27 cm; for women it is 7.75 cm. So in absolute
    terms, men’s heights are more variable.
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于男性，标准差为8.27厘米；对于女性，标准差为7.75厘米。因此，从绝对值来看，男性的身高更加变化。
- en: But to compare variability between groups, it is more meaningful to use the
    [coefficient of variation](https://en.wikipedia.org/wiki/Coefficient_of_variation)
    (CV), which is the standard deviation divided by the mean. It is a dimensionless
    measure of variability relative to scale.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，要比较不同组之间的变异性，使用[变异系数](https://en.wikipedia.org/wiki/Coefficient_of_variation)
    (CV) 更有意义，它是标准差除以均值。它是一个无量纲的变异性相对于尺度的度量。
- en: For men CV is 0.0465; for women it is 0.0475. The coefficient of variation is
    higher for women, so this dataset provides evidence against the Variability Hypothesis.
    But we can use Bayesian methods to make that conclusion more precise.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 对于男性，CV为0.0465；对于女性，CV为0.0475。女性的变异系数更高，因此这个数据集提供了反对变异性假设的证据。但是我们可以使用贝叶斯方法使这个结论更加精确。
- en: Use these summary statistics to compute the posterior distribution of `mu` and
    `sigma` for the distributions of male and female height. Use `Pmf.div_dist` to
    compute posterior distributions of CV. Based on this dataset and the assumption
    that the distribution of height is normal, what is the probability that the coefficient
    of variation is higher for men? What is the most likely ratio of the CVs and what
    is the 90% credible interval for that ratio?
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些摘要统计数据计算男性和女性身高分布的`mu`和`sigma`的后验分布。使用`Pmf.div_dist`计算CV的后验分布。基于这个数据集和身高分布是正态分布的假设，男性的变异系数更高的概率是多少？CV的最可能比率是多少，这个比率的90%可信区间是多少？
- en: 'Hint: Use different prior distributions for the two groups, and chose them
    so they cover all parameters with non-negligible probability.'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 提示：为两组使用不同的先验分布，并选择它们以便覆盖所有具有非零概率的参数。
- en: 'Also, you might find this function helpful:'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，你可能会发现这个函数有用：
- en: <details class="hide above-input"><summary aria-label="Toggle hidden content">Show
    code cell content Hide code cell content</summary>
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: <details class="hide above-input"><summary aria-label="Toggle hidden content">显示代码单元格内容
    隐藏代码单元格内容</summary>
- en: '[PRE127]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE127]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE128]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE128]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE129]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE129]</details> <details class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE130]'
  id: totrans-334
  prefs: []
  type: TYPE_PRE
  zh: '[PRE130]'
- en: '![_images/cefe85dd76a0d6417b6ca3812f888bb019e2178da1197955d44f5e37fb10cfe6.png](../Images/88f65519ee30c9435bcb53075ac9ded0.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/cefe85dd76a0d6417b6ca3812f888bb019e2178da1197955d44f5e37fb10cfe6.png](../Images/88f65519ee30c9435bcb53075ac9ded0.png)</details><details
    class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE131]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE131]</details> <details class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE132]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE132]</details> <details class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE133]'
  id: totrans-338
  prefs: []
  type: TYPE_PRE
  zh: '[PRE133]'
- en: '![_images/0fe23b061fdb21223027aa04f716cab5d7b29d98950d5eeba6beb10407696796.png](../Images/163c7b380a05e4d1adf09a222808f1e6.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/0fe23b061fdb21223027aa04f716cab5d7b29d98950d5eeba6beb10407696796.png](../Images/163c7b380a05e4d1adf09a222808f1e6.png)</details><details
    class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE134]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: '![_images/b07e3ae52ba0514a3f439fcfd1eb6862e6d00434cfedf0fae3ad72fc346f47d4.png](../Images/d233c72768657a36bdab646931ca3924.png)</details><details
    class="hide above-input"><summary aria-label="Toggle hidden content">Show code
    cell content Hide code cell content</summary>'
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: '![_images/b07e3ae52ba0514a3f439fcfd1eb6862e6d00434cfedf0fae3ad72fc346f47d4.png](../Images/d233c72768657a36bdab646931ca3924.png)</details><details
    class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容 隐藏代码单元格内容</summary>'
- en: '[PRE135]'
  id: totrans-342
  prefs: []
  type: TYPE_PRE
  zh: '[PRE135]'
- en: '[PRE136]</details> <details class="hide above-input"><summary aria-label="Toggle
    hidden content">Show code cell content Hide code cell content</summary>'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE136]</details> <details class="hide above-input"><summary aria-label="切换隐藏内容">显示代码单元格内容
    隐藏代码单元格内容</summary>'
- en: '[PRE137]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE137]'
- en: '[PRE138]</details>'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: '[PRE138]</details>'
