- en: Distributions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://allendowney.github.io/ElementsOfDataScience/08_distributions.html](https://allendowney.github.io/ElementsOfDataScience/08_distributions.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Click here to run this notebook on Colab](https://colab.research.google.com/github/AllenDowney/ElementsOfDataScience/blob/master/08_distributions.ipynb)
    or [click here to download it](https://github.com/AllenDowney/ElementsOfDataScience/raw/master/08_distributions.ipynb).'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter we’ll see three ways to describe a set of values:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: A probability mass function (PMF), which represents a set of values and the
    number of times each one appears in a dataset.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A cumulative distribution function (CDF), which contains the same information
    as a PMF in a form that makes it easier to visualize, make comparisons, and perform
    some computations.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A kernel density estimate (KDE), which is like a smooth, continuous version
    of a histogram.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For examples, we’ll use data from the General Social Survey (GSS) to look at
    distributions of age and income, and to explore the relationship between income
    and education.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: But we’ll start with one of the most important ideas in statistics, the distribution.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: Distributions
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A distribution is a set of values and their corresponding probabilities. For
    example, if you roll a six-sided die, there are six possible outcomes, the numbers
    `1` through `6`, and they all have the same probability, `1/6`.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: 'We can represent this distribution of outcomes with a table, like this:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '| Value | Probability |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
- en: '| 1 | 1/6 |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
- en: '| 2 | 1/6 |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
- en: '| 3 | 1/6 |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
- en: '| 4 | 1/6 |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
- en: '| 5 | 1/6 |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
- en: '| 6 | 1/6 |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
- en: More generally, a distributions can have any number of values, the values can
    be any type, and the probabilities do not have to be equal.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: To represent distributions in Python, we will use a library called `empiricaldist`,
    for “empirical distribution”, where “empirical” means it is based on data rather
    than a mathematical formula.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: '`empiricaldist` provides an object called `Pmf`, which stands for “probability
    mass function”. A `Pmf` object contains a set of possible outcomes and their probabilities.'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, here’s a `Pmf` that represents the outcome of rolling a six-sided
    die:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The first argument is the probability of each outcome; the second argument is
    the list of outcomes. We can display the result like this.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '|  | probs |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
- en: '| 1 | 0.166667 |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
- en: '| 2 | 0.166667 |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
- en: '| 3 | 0.166667 |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
- en: '| 4 | 0.166667 |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
- en: '| 5 | 0.166667 |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
- en: '| 6 | 0.166667 |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
- en: A `Pmf` object is a specialized version of a Pandas `Series`, so it provides
    all of the attributes and methods of a `Series`, plus some additional methods
    we’ll see soon.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
- en: The General Social Survey
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now we’ll use `Pmf` objects to represent distributions of values from a new
    dataset, the General Social Survey (GSS). The GSS surveys a representative sample
    of adult residents of the U.S. and asks questions about demographics, personal
    history, and beliefs about social and political issues. It is widely used by politicians,
    policy makers, and researchers.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: The GSS dataset contains hundreds of columns; using an online tool call [GSS
    Explorer](https://gssdataexplorer.norc.org/) I’ve selected just a few and created
    a subset of the data, called an **extract**.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: Like the NSFG data we used in the previous chapter, the GSS data is stored in
    a fixed-width format, described by a Stata data dictionary.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: We will use the `statadict` library to read the data dictionary.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The data file is compressed, but we can use the `gzip` library to open it.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The result is an object that behaves like a file, so we can pass it as an argument
    to `read_fwf`:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The result is a `DataFrame` with one row for each respondent, and one column
    for each variable. Here are the first few rows.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '|  | YEAR | ID_ | AGE | EDUC | SEX | GUNLAW | GRASS | REALINC |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- | --- | --- | --- |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
- en: '| 0 | 1972 | 1 | 23 | 16 | 2 | 1 | 0 | 18951.0 |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
- en: '| 1 | 1972 | 2 | 70 | 10 | 1 | 1 | 0 | 24366.0 |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
- en: '| 2 | 1972 | 3 | 48 | 12 | 2 | 1 | 0 | 24366.0 |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
- en: '| 3 | 1972 | 4 | 27 | 17 | 2 | 1 | 0 | 30458.0 |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 1972 | 4 | 27 | 17 | 2 | 1 | 0 | 30458.0 |'
- en: '| 4 | 1972 | 5 | 61 | 12 | 2 | 1 | 0 | 50763.0 |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 1972 | 5 | 61 | 12 | 2 | 1 | 0 | 50763.0 |'
- en: I’ll explain these variables as we go along, but if you want more information,
    you can read the online documentation at [https://gssdataexplorer.norc.org/variables/vfilter](https://gssdataexplorer.norc.org/variables/vfilter).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 我会在接下来的过程中解释这些变量，但如果你想了解更多信息，可以阅读[https://gssdataexplorer.norc.org/variables/vfilter](https://gssdataexplorer.norc.org/variables/vfilter)上的在线文档。
- en: Distribution of Education
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 教育分布
- en: To get started with this dataset, let’s look at the distribution of `EDUC`,
    which records the number of years of education for each respondent. First we’ll
    select a column from the `DataFrame` and use `value_counts` to see what values
    are in it.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始处理这个数据集，让我们看看`EDUC`的分布，它记录了每个受访者的教育年限。首先，我们将从`DataFrame`中选择一列，并使用`value_counts`来查看其中包含哪些值。
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The result from `value_counts` is a set of possible values and the number of
    times each one appears, so it is a kind of distribution.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '`value_counts`的结果是一组可能的值以及每个值出现的次数，因此它是一种分布。'
- en: The values `98` and `99` are special codes for “Don’t know” and “No answer”.
    We’ll use `replace` to replace these codes with `NaN`.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 值`98`和`99`是“不知道”和“无回答”的特殊代码。我们将使用`replace`将这些代码替换为`NaN`。
- en: '[PRE10]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: We’ve already seen one way to visualize a distribution, a histogram. Here’s
    the histogram of education level.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到了一种可视化分布的方法，即直方图。这是教育水平的直方图。
- en: '[PRE11]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![_images/08_distributions_33_0.png](../Images/b767f3981eee2b12b77061a2791a0c4e.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_33_0.png](../Images/b767f3981eee2b12b77061a2791a0c4e.png)'
- en: Based on the histogram, we can see the general shape of the distribution and
    the central tendency – it looks like the peak is near 12 years of education. But
    a histogram is not the best way to visualize this distribution because it obscures
    some important details.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 根据直方图，我们可以看到分布的一般形状和中心趋势——看起来峰值接近12年的教育。但是直方图并不是可视化这种分布的最佳方式，因为它掩盖了一些重要的细节。
- en: An alternative is to use a `Pmf`. The function `Pmf.from_seq` takes any kind
    of sequence – like a list, tuple, or Pandas `Series` – and computes the distribution
    of the values in the sequence.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种方法是使用`Pmf`。函数`Pmf.from_seq`接受任何类型的序列——如列表、元组或Pandas `Series`——并计算序列中值的分布。
- en: '[PRE12]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The keyword argument `normalize=False` indicates that we don’t want to normalize
    this PMF. I’ll explain what that means soon.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 关键字参数`normalize=False`表示我们不想对这个PMF进行标准化。我很快会解释这是什么意思。
- en: Here’s what the first few rows look like.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 这是前几行的样子。
- en: '[PRE14]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '|  | probs |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '|  | probs |'
- en: '| --- | --- |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 0.0 | 165 |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| 0.0 | 165 |'
- en: '| 1.0 | 47 |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| 1.0 | 47 |'
- en: '| 2.0 | 152 |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| 2.0 | 152 |'
- en: In this dataset, there are `165` respondents who report that they have had no
    formal education, and `47` who have only one year. Here the last few rows.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个数据集中，有`165`名受访者报告称他们没有接受过正规教育，有`47`名只接受了一年的教育。这是最后几行。
- en: '[PRE15]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '|  | probs |'
  id: totrans-82
  prefs: []
  type: TYPE_TB
  zh: '|  | probs |'
- en: '| --- | --- |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 18.0 | 2384 |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| 18.0 | 2384 |'
- en: '| 19.0 | 920 |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| 19.0 | 920 |'
- en: '| 20.0 | 1439 |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 20.0 | 1439 |'
- en: There are `1439` respondents who report that they have 20 or more years of formal
    education, which probably means they attended college and graduate school.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 有`1439`名受访者报告称他们接受了20年或更多年的正规教育，这可能意味着他们上了大学和研究生院。
- en: 'You can use the bracket operator to look up a value in a `Pmf` and get the
    corresponding count:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用方括号运算符在`Pmf`中查找一个值并获得相应的计数：
- en: '[PRE16]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Usually when we make a PMF, we want to know the *fraction* of respondents with
    each value, rather than the counts. We can do that by setting `normalize=True`;
    then we get a **normalized** PMF, that is, a PMF where the values in the second
    column add up to 1.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 通常当我们制作PMF时，我们想知道每个值的*比例*，而不是计数。我们可以通过设置`normalize=True`来实现；然后我们得到一个**标准化**的PMF，即第二列中的值加起来为1的PMF。
- en: '[PRE18]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '|  | probs |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '|  | probs |'
- en: '| --- | --- |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 0.0 | 0.002553 |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| 0.0 | 0.002553 |'
- en: '| 1.0 | 0.000727 |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| 1.0 | 0.000727 |'
- en: '| 2.0 | 0.002352 |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| 2.0 | 0.002352 |'
- en: 'Now if we use the bracket operator, the result is a fraction. For example,
    the fraction of people with 12 years of education is about 30%:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，如果我们使用方括号运算符，结果将是一个分数。例如，12年教育的人数约为30%：
- en: '[PRE19]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '`Pmf` provides a `bar` method that plots the values and their probabilities
    as a bar chart.'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`Pmf`提供了一个`bar`方法，可以将值及其概率绘制成条形图。'
- en: '[PRE21]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![_images/08_distributions_47_0.png](../Images/8ccd9e744e3f7dd5765f9624805024e4.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_47_0.png](../Images/8ccd9e744e3f7dd5765f9624805024e4.png)'
- en: In this figure, we can see that the most common value is 12 years, but there
    are also peaks at 14 and 16, which correspond to two and four years of college.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个图中，我们可以看到最常见的值是12年，但也有14和16的峰值，对应着两年和四年的大学。
- en: For this data, the PMF is probably a better choice than the histogram. The PMF
    shows all unique values, so we can see where the peaks are. Because the histogram
    puts values into bins, it obscures these details. With this dataset, and the default
    number of bins, we couldn’t see the peaks at 14 and 16 years. But PMFs have limitations,
    too, as we’ll see.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这些数据，PMF可能比直方图更好。PMF显示所有唯一的值，因此我们可以看到峰值在哪里。因为直方图将值放入箱中，它掩盖了这些细节。对于这个数据集和默认的箱数，我们无法看到14和16年的峰值。但是PMF也有局限性，我们会看到。
- en: First, here’s an exercise where you can practice with PMFs.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，这里有一个练习，你可以练习一下PMF。
- en: '**Exercise:** Let’s look at the `YEAR` column in the `DataFrame`, which represents
    the year each respondent was interviewed.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**让我们看看`DataFrame`中的`YEAR`列，它表示每个受访者被采访的年份。'
- en: Make an unnormalized `Pmf` for `YEAR` and display the result. How many respondents
    were interviewed in 2018?
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 为`YEAR`制作一个未标准化的`Pmf`并显示结果。2018年有多少受访者？
- en: Cumulative Distribution Functions
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 累积分布函数
- en: 'Now we’ll see another way to represent a distribution, the cumulative distribution
    function (CDF). `empiricaldist` provides a `Cdf` object that represents a CDF.
    We can import it like this:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将看到另一种表示分布的方法，即累积分布函数（CDF）。`empiricaldist`提供了一个代表CDF的`Cdf`对象。我们可以这样导入它：
- en: '[PRE22]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'As an example, suppose we have a sequence of five values:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，假设我们有一个包含五个值的序列：
- en: '[PRE23]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Here’s the `Pmf` of these values.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这是这些值的`Pmf`。
- en: '[PRE24]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '|  | probs |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '|  | probs |'
- en: '| --- | --- |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 1 | 0.2 |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 0.2 |'
- en: '| 2 | 0.4 |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 0.4 |'
- en: '| 3 | 0.2 |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 0.2 |'
- en: '| 5 | 0.2 |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 0.2 |'
- en: If you draw a random value from `values`, the `Pmf` tells you the chance of
    getting `x`, for any value of `x`. So the probability of the value `1` is `1/5`;
    the probability of the value `2` is `2/5`; and the probabilities for `3` and `5`
    are `1/5` each.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从`values`中随机抽取一个值，`Pmf`会告诉你获得`x`的机会，对于任何`x`的值。因此，值`1`的概率是`1/5`；值`2`的概率是`2/5`；值`3`和`5`的概率各为`1/5`。
- en: A CDF is similar to a PMF in the sense that it contains values and their probabilities;
    the difference is that the probabilities in the CDF are the cumulative sum of
    the probabilities in the PMF.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: CDF类似于PMF，因为它包含值及其概率；不同之处在于CDF中的概率是PMF中概率的累积和。
- en: Here’s a `Cdf` object for the same five values.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这是相同五个值的`Cdf`对象。
- en: '[PRE25]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '|  | probs |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '|  | probs |'
- en: '| --- | --- |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 1 | 0.2 |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 0.2 |'
- en: '| 2 | 0.6 |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 0.6 |'
- en: '| 3 | 0.8 |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| 3 | 0.8 |'
- en: '| 5 | 1.0 |'
  id: totrans-131
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 1.0 |'
- en: If you draw a random value from `values`, `Cdf` tells you the chance of getting
    a value *less than or equal to* `x`, for any given `x`.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从`values`中随机抽取一个值，`Cdf`会告诉你获得一个值*小于或等于*`x`的机会，对于任何给定的`x`。
- en: So the `Cdf` of `1` is `1/5` because one of the five values in the sequence
    is less than or equal to 1.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，`1`的`Cdf`是`1/5`，因为序列中五个值中有一个小于或等于1。
- en: The `Cdf` of 2 is `3/5` because three of the five values are less than or equal
    to 2.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 2的`Cdf`是`3/5`，因为五个值中有三个小于或等于2。
- en: And the `Cdf` of 5 is `5/5` because all of the values are less than or equal
    to 5.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '`5`的`Cdf`是`5/5`，因为所有的值都小于或等于5。'
- en: CDF of Age
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 年龄的CDF
- en: Now let’s look at a more substantial `Cdf`, the distribution of ages for respondents
    in the General Social Survey.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看一个更实质性的`Cdf`，即美国社会总体调查中受访者年龄的分布。
- en: The variable we’ll use is `'AGE'`. According to the codebook, the range of the
    values is from `18` to `89`, where `89` means “89 or older”. The special codes
    `98` and `99` mean “Don’t know” and “Didn’t answer”. See [https://gssdataexplorer.norc.org/variables/53/vshow](https://gssdataexplorer.norc.org/variables/53/vshow).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用的变量是'AGE'。根据代码簿，值的范围是从`18`到`89`，其中`89`表示“89岁或更大”。特殊代码`98`和`99`表示“不知道”和“没有回答”。参见[https://gssdataexplorer.norc.org/variables/53/vshow](https://gssdataexplorer.norc.org/variables/53/vshow)。
- en: We can use `replace` to replace the special codes with `NaN`.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`replace`将特殊代码替换为`NaN`。
- en: '[PRE26]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'We can compute the `Cdf` of these values like this:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以这样计算这些值的`Cdf`：
- en: '[PRE27]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '`Cdf` provides a method called `plot` that plots the CDF as a line. Here’s
    what it looks like.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '`Cdf`提供了一个名为`plot`的方法，用于绘制CDF作为一条线。下面是它的样子。'
- en: '[PRE28]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '![_images/08_distributions_66_0.png](../Images/08d79f8c37a2eb99d15d998d79c69455.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_66_0.png](../Images/08d79f8c37a2eb99d15d998d79c69455.png)'
- en: The \(x\)-axis is the ages, from 18 to 89\. The \(y\)-axis is the cumulative
    probabilities, from 0 to 1.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: \(x\)-轴是年龄，从18到89。\(y\)-轴是累积概率，从0到1。
- en: '`cdf_age` can be used as a function, so if you give it an age, it returns the
    corresponding probability (in a NumPy array).'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '`cdf_age`可以作为一个函数使用，因此如果给它一个年龄，它会返回相应的概率（在NumPy数组中）。'
- en: '[PRE29]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[PRE30]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '`q` stands for “quantity”, which is what we are looking up. `p` stands for
    probability, which is the result. In this example, the quantity is age 51, and
    the corresponding probability is about `0.63`. That means that about 63% of the
    respondents are 51 years old or younger.'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '`q`代表“数量”，这是我们要查找的内容。`p`代表概率，这是结果。在这个例子中，数量是51岁，相应的概率约为`0.63`。这意味着大约63%的受访者年龄为51岁或更年轻。'
- en: The arrow in the following figure shows how you could read this value from the
    CDF, at least approximately.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 下图中的箭头显示了如何从CDF中读取这个值，至少是近似的。
- en: '[PRE31]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![_images/08_distributions_71_0.png](../Images/997af415e48fee04879a2b81dc859a2f.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_71_0.png](../Images/997af415e48fee04879a2b81dc859a2f.png)'
- en: The CDF is an invertible function, which means that if you have a probability,
    `p`, you can look up the corresponding quantity, `q`. `Cdf` provides a method
    called `inverse` that computes the inverse of the cumulative distribution function.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: CDF是一个可逆函数，这意味着如果你有一个概率`p`，你可以查找相应的数量`q`。`Cdf`提供了一个名为`inverse`的方法，用于计算累积分布函数的逆函数。
- en: '[PRE32]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: In this example, we look up the probability `0.25` and the result is `31`.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们查找概率`0.25`，结果是`31`。
- en: That means that 25% of the respondents are age 31 or less. Another way to say
    the same thing is “age 31 is the 25th percentile of this distribution”.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着25%的受访者年龄为31岁或以下。另一种说法是“31岁是这个分布的第25百分位数”。
- en: If we look up probability `0.75`, it returns `59`, so 75% of the respondents
    are 59 or younger.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们查找概率`0.75`，它返回`59`，所以75%的受访者年龄为59岁或更年轻。
- en: '[PRE34]'
  id: totrans-160
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '[PRE35]'
  id: totrans-161
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: In the following figure, the arrows show how you could read these values from
    the CDF.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在下图中，箭头显示了如何从CDF中读取这些值。
- en: '[PRE36]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '![_images/08_distributions_77_0.png](../Images/4c002c1357bdea7e324ca209ff4ed33a.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_77_0.png](../Images/4c002c1357bdea7e324ca209ff4ed33a.png)'
- en: The distance from the 25th to the 75th percentile is called the **interquartile
    range**, or IQR. It measures the spread of the distribution, so it is similar
    to standard deviation or variance.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 从第25百分位到第75百分位的距离称为**四分位距**，或IQR。它衡量了分布的扩散程度，因此类似于标准差或方差。
- en: Because it is based on percentiles, it doesn’t get thrown off by extreme values
    or outliers, the way standard deviation does. So IQR is more **robust** than variance,
    which means it works well even if there are errors in the data or extreme values.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 因为它是基于百分位数的，所以它不会受到极端值或异常值的影响，就像标准差那样。因此IQR比方差更**稳健**，这意味着即使数据中存在错误或极端值，它也能很好地工作。
- en: '**Exercise:** Using `cdf_age`, compute the fraction of the respondents in the
    GSS dataset that are *older* than 65.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**使用`cdf_age`，计算GSS数据集中*年龄*大于65岁的受访者的比例。'
- en: '**Exercise:** The distribution of income in almost every country is long-tailed,
    which means there are a small number of people with very high incomes. In the
    GSS dataset, the column `REALINC` represents total household income, converted
    to 1986 dollars. We can get a sense of the shape of this distribution by plotting
    the CDF.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
- en: Select `REALINC` from the `gss` dataset, make a `Cdf` called `cdf_income`, and
    plot it. Remember to label the axes!
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: Comparing Distributions
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: So far we’ve seen two ways to represent distributions, PMFs and CDFs. Now we’ll
    use PMFs and CDFs to compare distributions, and we’ll see the pros and cons of
    each.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: One way to compare distributions is to plot multiple PMFs on the same axes.
    For example, suppose we want to compare the distribution of age for male and female
    respondents.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
- en: First we’ll create a Boolean Series that’s true for male respondents.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE37]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: And another that’s true for female respondents.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE38]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: Now we can select ages for the male and female respondents.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE39]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: And plot a PMF for each.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE40]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '![_images/08_distributions_90_0.png](../Images/6ddc171d91edb4b8e7c137e063f6e4b6.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
- en: The plot is pretty noisy. In the range from 40 to 50, it looks like the PMF
    is higher for men. And from 70 to 80, it is higher for women. But both of those
    differences might be due to random variation.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
- en: Now let’s do the same thing with CDFs; everything is the same except we replace
    `Pmf` with `Cdf`.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE41]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '![_images/08_distributions_92_0.png](../Images/ae09f59ca0f017f9859f5db7759d95c7.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
- en: In general, CDFs are smoother than PMFs. Because they smooth out randomness,
    we can often get a better view of real differences between distributions. In this
    case, the lines are close together until age 40; after that, the CDF is higher
    for men than women. So what does that mean?
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
- en: One way to interpret the difference is that the fraction of men below a given
    age is generally more than the fraction of women below the same age. For example,
    about 79% of men are 60 or less, compared to 76% of women.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE42]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Going the other way, we could also compare percentiles. For example, the median
    age woman is older than the median age man, by about one year.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE44]'
  id: totrans-191
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '[PRE45]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '**Exercise:** What fraction of men are over 80? What fraction of women?'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: Comparing Incomes
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As another example, let’s look at household income and compare the distribution
    before and after 1995 (I chose 1995 because it’s roughly the midpoint of the survey).
    The variable `REALINC` represents household income in 1986 dollars.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
- en: We’ll make a Boolean `Series` to select respondents interviewed before and after
    1995.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE46]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: Now we can plot the PMFs.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE47]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '![_images/08_distributions_102_0.png](../Images/bb298e62ea0432644782c497c335279f.png)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
- en: There are a lot of unique values in this distribution, and none of them appear
    very often. As a result, the PMF is so noisy and we can’t really see the shape
    of the distribution.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: It’s also hard to compare the distributions. It looks like there are more people
    with high incomes after 1995, but it’s hard to tell. We can get a clearer picture
    with a CDF.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE48]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '![_images/08_distributions_104_0.png](../Images/5b723f08b7b04c615dad130086e966c1.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
- en: Below $30,000 the CDFs are almost identical; above that, we can see that the
    post-1995 distribution is shifted to the right. In other words, the fraction of
    people with high incomes is about the same, but the income of high earners has
    increased.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
- en: In general, I recommend CDFs for exploratory analysis. They give you a clear
    view of the distribution, without too much noise, and they are good for comparing
    distributions, especially if you have more than two.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
- en: '**Exercise:** In the previous figure, the dollar amounts are big enough that
    the labels on the `x` axis are crowded. Improve the figure by expressing income
    in 1000s of dollars (and update the `x` label accordingly).'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
- en: '**Exercise:** Let’s compare incomes for different levels of education in the
    GSS dataset'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
- en: To do that we’ll create Boolean `Series` to identify respondents with different
    levels of education.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: In the U.S, 12 years of education usually means the respondent has completed
    high school (secondary education).
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在美国，12年的教育通常意味着受访者已经完成了高中（中等教育）。
- en: A respondent with 14 years of education has probably completed an associate
    degree (two years of college)
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 14年教育的受访者可能已经完成了副学士学位（两年大学）
- en: Someone with 16 years has probably completed a bachelor’s degree (four years
    of college or university).
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 16年教育的人可能已经完成了学士学位（四年大学或大学）。
- en: Define Boolean `Series` named `high`, `assc`, and `bach` that are true for respondents
    with
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 定义名为`high`、`assc`和`bach`的布尔`Series`，对于受访者，这些布尔值为真
- en: 12 or fewer years of education,
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 12年或更少的教育，
- en: 13, 14, or 15 years, and
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 13、14或15岁，以及
- en: 16 or more.
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 16岁或更多。
- en: Compute and plot the distribution of income for each group. Remember to label
    the CDFs, display a legend, and label the axes. Write a few sentences that describe
    and interpret the results.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 计算并绘制每个组的收入分布。记得标记CDFs，显示图例，并标记坐标轴。写几句话描述和解释结果。
- en: Modeling Distributions
  id: totrans-218
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 建模分布
- en: Some distributions have names. For example, you might be familiar with the normal
    distribution, also called the Gaussian distribution or the bell curve. And you
    might have heard of others like the exponential distribution, binomial distribution,
    or maybe Poisson distribution.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 一些分布有名称。例如，你可能熟悉正态分布，也称为高斯分布或钟形曲线。你可能听说过其他分布，比如指数分布、二项分布，或者泊松分布。
- en: These “distributions with names” are called **analytic** because they are described
    by analytic mathematical functions, as contrasted with empirical distributions,
    which are based on data.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这些“带有名称的分布”被称为**解析**，因为它们由解析数学函数描述，与基于数据的经验分布相对。
- en: It turns out that many things we measure in the world have distributions that
    are well approximated by analytic distributions, so these distributions are sometimes
    good models for the real world.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 事实证明，我们在世界上测量的许多事物都具有可以用解析分布很好近似的分布，因此这些分布有时是现实世界的良好模型。
- en: In this context, what I mean by a “model” is a simplified description of the
    world that is accurate enough for its intended purpose.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我所说的“模型”是指对世界的简化描述，足够准确以满足其预期目的。
- en: In this section, we’ll compute the CDF of a normal distribution and compare
    it to an empirical distribution of data. But before we get to real data, we’ll
    start with fake data.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将计算正态分布的CDF，并将其与数据的经验分布进行比较。但在我们开始处理真实数据之前，我们将从虚假数据开始。
- en: The following statement uses NumPy’s `random` library to generate 1000 values
    from a normal distribution with mean `0` and standard deviation `1`.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 以下语句使用NumPy的`random`库从均值为`0`，标准差为`1`的正态分布中生成1000个值。
- en: '[PRE49]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: Here’s what the empirical distribution of the sample looks like.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 这是样本的经验分布的样子。
- en: '[PRE51]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '![_images/08_distributions_115_0.png](../Images/705d7b62ac2b1c533d29f10195a3e7de.png)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_115_0.png](../Images/705d7b62ac2b1c533d29f10195a3e7de.png)'
- en: If we did not know that this sample was drawn from a normal distribution, and
    we wanted to check, we could compare the CDF of the data to the CDF of an ideal
    normal distribution, which we can use the SciPy library to compute.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们不知道这个样本是从正态分布中抽取的，并且我们想要检查，我们可以将数据的CDF与理想正态分布的CDF进行比较，我们可以使用SciPy库来计算。
- en: '[PRE52]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: First we import `norm` from `scipy.stats`, which is a collection of functions
    related to statistics.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们从`scipy.stats`中导入`norm`，这是与统计相关的一组函数。
- en: Then we use `linspace()` to create an array of equally-spaced points from -3
    to 3; those are the `x` values where we will evaluate the normal CDF.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们使用`linspace()`创建一个从-3到3的等间距点的数组；这些是我们将评估正态CDF的`x`值。
- en: Next, `norm(0, 1)` creates an object that represents a normal distribution with
    mean `0` and standard deviation `1`.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，`norm(0, 1)`创建一个表示均值为`0`，标准差为`1`的正态分布的对象。
- en: Finally, `cdf` computes the CDF of the normal distribution, evaluated at each
    of the `xs`.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`cdf`计算正态分布的CDF，在每个`xs`处进行评估。
- en: I’ll plot the normal CDF with a gray line and then plot the CDF of the data
    again.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 我将用灰线绘制正态分布的CDF，然后再次绘制数据的CDF。
- en: '[PRE53]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '![_images/08_distributions_119_0.png](../Images/208e78c7944d03d1d832b0e495aad861.png)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_119_0.png](../Images/208e78c7944d03d1d832b0e495aad861.png)'
- en: The CDF of the random sample agrees with the normal model. And that’s not surprising
    because the data were actually sampled from a normal distribution. When we collect
    data in the real world, we do not expect it to fit a normal distribution as well
    as this. In the next exercise, we’ll try it and see.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 随机样本的CDF与正态模型一致。这并不奇怪，因为数据实际上是从正态分布中抽取的。当我们在现实世界中收集数据时，我们并不希望它与正态分布一样好。在下一个练习中，我们将尝试并查看。
- en: '**Exercise:** Is the normal distribution a good model for the distribution
    of ages in the U.S. population?'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**正态分布是否是美国人口年龄分布的良好模型？'
- en: 'To answer this question:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 要回答这个问题：
- en: Compute the mean and standard deviation of ages in the GSS dataset.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算GSS数据集中年龄的平均值和标准差。
- en: Use `linspace` to create an array of equally spaced values between 18 and 89.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`linspace`创建一个在18到89之间的等间距值的数组。
- en: Use `norm` to create a normal distribution with the same mean and standard deviation
    as the data, then use it to compute the normal CDF for each value in the array.
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`norm`创建一个与数据具有相同均值和标准差的正态分布，然后使用它来计算数组中每个值的正态CDF。
- en: Plot the normal CDF with a gray line.
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用灰线绘制正态分布的CDF。
- en: Plot the CDF of the ages in the GSS.
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制GSS中年龄的CDF。
- en: How well do the plotted CDFs agree?
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制的CDF是否很好地吻合？
- en: '**Exercise:** In many datasets, the distribution of income is approximately
    **lognormal**, which means that the logarithms of the incomes fit a normal distribution.
    Let’s see whether that’s true for the GSS data.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**在许多数据集中，收入的分布大约是**对数正态**的，这意味着收入的对数符合正态分布。让我们看看GSS数据是否符合这一点。'
- en: 'Extract `REALINC` from `gss` and compute its logarithm using `np.log10()`.
    Hint: Replace the value `0` with `NaN` before computing logarithms.'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从`gss`中提取`REALINC`并使用`np.log10()`计算其对数。提示：在计算对数之前，用`NaN`替换值`0`。
- en: Compute the mean and standard deviation of the log-transformed incomes.
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算对数转换后的收入的均值和标准差。
- en: Use `norm` to make a normal distribution with the same mean and standard deviation
    as the log-transformed incomes.
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`norm`函数创建一个与对数转换后的收入具有相同均值和标准差的正态分布。
- en: Plot the CDF of the normal distribution.
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制正态分布的CDF。
- en: Compute and plot the CDF of the log-transformed incomes.
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算并绘制对数转换后的收入的CDF。
- en: How similar are the CDFs of the log-transformed incomes and the normal distribution?
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 对数转换后的收入和正态分布的CDF有多相似？
- en: Kernel Density Estimation
  id: totrans-255
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 核密度估计
- en: 'We have seen two ways to represent distributions, PMFs and CDFs. Now we’ll
    learn another way: a probability density function, or PDF. The `norm` function,
    which we used to compute the normal CDF, can also compute the normal PDF:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到了两种表示分布的方法，PMF和CDF。现在我们将学习另一种方法：概率密度函数，或PDF。我们用来计算正态CDF的`norm`函数也可以计算正态PDF：
- en: '[PRE54]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '![_images/08_distributions_127_0.png](../Images/afecee42b95c4c363297b06860ada23b.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_127_0.png](../Images/afecee42b95c4c363297b06860ada23b.png)'
- en: The normal PDF is the classic “bell curve”.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 正态PDF是经典的“钟形曲线”。
- en: 'It is tempting to compare the PMF of the data to the PDF of the normal distribution,
    but that doesn’t work. Let’s see what happens if we try:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 诱人的是将数据的PMF与正态分布的PDF进行比较，但这并不起作用。让我们看看如果我们尝试会发生什么：
- en: '[PRE55]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '![_images/08_distributions_129_0.png](../Images/7f46d3931d39c210362bc67fc8c3a222.png)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_129_0.png](../Images/7f46d3931d39c210362bc67fc8c3a222.png)'
- en: The PMF of the sample is a flat line across the bottom. In the random sample,
    every value is unique, so they all have the same probability, one in 1000.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 样本的PMF是底部的一条直线。在随机样本中，每个值都是唯一的，因此它们的概率都相同，为1000中的一个。
- en: However, we can use the points in the sample to estimate the PDF of the distribution
    they came from. This process is called **kernel density estimation**, or KDE.
    It’s a way of getting from a PMF, a probability mass function, to a PDF, a probability
    density function.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们可以使用样本中的点来估计它们来自的分布的PDF。这个过程称为**核密度估计**，或KDE。这是从PMF（概率质量函数）到PDF（概率密度函数）的一种方法。
- en: To generate a KDE plot, we’ll use the Seaborn library, imported as `sns`. Seaborn
    provides `kdeplot`, which takes the sample, estimates the PDF, and plots it.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 为了生成KDE图，我们将使用Seaborn库，导入为`sns`。Seaborn提供`kdeplot`，它接受样本，估计PDF并绘制。
- en: '[PRE56]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '![_images/08_distributions_131_0.png](../Images/0d64dca24548d46d7c94ce7aff656c33.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_131_0.png](../Images/0d64dca24548d46d7c94ce7aff656c33.png)'
- en: Now we can compare the KDE plot and the normal PDF.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以比较KDE图和正态PDF。
- en: '[PRE57]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '![_images/08_distributions_133_0.png](../Images/b2651ac172e84de0a538a65b0d8b4af7.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![_images/08_distributions_133_0.png](../Images/b2651ac172e84de0a538a65b0d8b4af7.png)'
- en: The KDE plot matches the normal PDF pretty well, although the differences look
    bigger when we compare PDFs than they did with the CDFs. That means that the PDF
    is a more sensitive way to look for differences, but often it is too sensitive.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: KDE图与正态PDF相当匹配，尽管当我们比较PDF时，差异看起来更大，而在比较CDF时并非如此。这意味着PDF是寻找差异的更敏感的方法，但通常它太敏感了。
- en: It’s hard to tell whether apparent differences mean anything, or if they are
    just random, as in this case.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 很难判断明显的差异是否有意义，或者它们只是随机的，就像在这种情况下一样。
- en: '**Exercise:** In a previous exercise, we asked “Is the normal distribution
    a good model for the distribution of ages in the U.S. population?” To answer this
    question, we plotted the CDF of the data and compared it to the CDF of a normal
    distribution with the same mean and standard deviation.'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**在以前的练习中，我们问“正态分布是否是美国人口年龄分布的良好模型？”为了回答这个问题，我们绘制了数据的CDF并将其与具有相同均值和标准差的正态分布的CDF进行比较。'
- en: Now we’ll compare the estimated density of the data with the normal PDF.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将比较数据的估计密度和正态PDF。
- en: Again, compute the mean and standard deviation of ages in the GSS dataset.
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 再次计算GSS数据集中年龄的均值和标准差。
- en: Use `linspace` to create an array of values between 18 and 89.
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`linspace`创建一个在18到89之间的值数组。
- en: Use `norm` to create a normal distribution with the same mean and standard deviation
    as the data, then use it to compute the normal PDF for each value in the array.
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`norm`创建一个与数据具有相同均值和标准差的正态分布，然后使用它来计算数组中每个值的正态PDF。
- en: Plot the normal PDF with a gray line.
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用灰线绘制正态PDF。
- en: Use `sns.kdeplot` to estimate and plot the density of the ages in the GSS.
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`sns.kdeplot`估计和绘制GSS中年龄的密度。
- en: 'Note: Seaborn can’t handle NaNs, so use `dropna` to drop them before calling
    `kdeplot`.'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：Seaborn无法处理NaN，因此在调用`kdeplot`之前使用`dropna`将其删除。
- en: How well do the PDF and KDE plots agree?
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: PDF和KDE图有多符合？
- en: '**Exercise:** In a previous exercise, we used CDFs to see if the distribution
    of income fits a lognormal distribution. We can make the same comparison using
    a PDF and KDE.'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '**练习：**在以前的练习中，我们使用CDF来查看收入分布是否符合对数正态分布。我们可以使用PDF和KDE进行相同的比较。'
- en: Again, extract `REALINC` from `gss` and compute its logarithm using `np.log10()`.
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 再次从`gss`中提取`REALINC`并使用`np.log10()`计算其对数。
- en: Compute the mean and standard deviation of the log-transformed incomes.
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算对数转换后的收入的均值和标准差。
- en: Use `norm` to make a normal distribution with the same mean and standard deviation
    as the log-transformed incomes.
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`norm`创建一个与对数转换后的收入具有相同均值和标准差的正态分布。
- en: Plot the PDF of the normal distribution.
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绘制正态分布的PDF。
- en: Use `sns.kdeplot()` to estimate and plot the density of the log-transformed
    incomes.
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`sns.kdeplot()`估计和绘制对数转换后的收入的密度。
- en: Summary
  id: totrans-288
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we’ve seen four ways to visualize distributions, PMFs, CDFs,
    and KDE plots.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已经看到了四种可视化分布的方法，PMF、CDF和KDE图。
- en: In general, I use CDFs when I am exploring data. That way, I get the best view
    of what’s going on without getting distracted by noise.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，我在探索数据时使用CDF。这样，我可以最好地了解情况，而不会被噪音分散注意力。
- en: Then, if I am presenting results to an audience unfamiliar with CDFs, I might
    use a PMF if the dataset contains a small number of unique values, or KDE if there
    are many unique values.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，如果我要向不熟悉CDF的观众展示结果，如果数据集包含少量唯一值，我可能会使用PMF，如果有许多唯一值，我可能会使用KDE。
